set(SOURCE_FILES
  ${CMAKE_CURRENT_SOURCE_DIR}/Mumble.pb-c.c
  ${CMAKE_CURRENT_SOURCE_DIR}/ban.c
  ${CMAKE_CURRENT_SOURCE_DIR}/channel.c
  ${CMAKE_CURRENT_SOURCE_DIR}/client.c
  ${CMAKE_CURRENT_SOURCE_DIR}/conf.c
  ${CMAKE_CURRENT_SOURCE_DIR}/crypt.c
  ${CMAKE_CURRENT_SOURCE_DIR}/log.c
  ${CMAKE_CURRENT_SOURCE_DIR}/main.c
  ${CMAKE_CURRENT_SOURCE_DIR}/messagehandler.c
  ${CMAKE_CURRENT_SOURCE_DIR}/messages.c
  ${CMAKE_CURRENT_SOURCE_DIR}/pds.c
  ${CMAKE_CURRENT_SOURCE_DIR}/server.c
  ${CMAKE_CURRENT_SOURCE_DIR}/timer.c
  ${CMAKE_CURRENT_SOURCE_DIR}/util.c
  ${CMAKE_CURRENT_SOURCE_DIR}/voicetarget.c
  )

if(SSL MATCHES "openssl")
  list(APPEND SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/ssli_openssl.c)
elseif(SSL MATCHES "polarssl")
  list(APPEND SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/ssli_polarssl.c)
elseif(SSL MATCHES "gnutls")
  list(APPEND SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/ssli_gnutls.c)
endif(SSL MATCHES "openssl")

if(USE_SHAREDMEMORY_API)
  list(APPEND SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/sharedmemory.c)
endif(USE_SHAREDMEMORY_API)

set(SOURCE ${SOURCE} ${SOURCE_FILES} PARENT_SCOPE)

